<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Glyphie Chat</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <div id="container">
      <div class="minimized-panel">
        <div class="minimized-status" id="minimized-status">Glyphie</div>
        <button class="minimized-expand-btn" id="minimized-expand-btn">
          Expand
        </button>
      </div>

      <div id="wrapper">
        <!-- Sidebar Navigation as a tablist -->
        <nav id="sidebar" role="tablist" aria-label="Main navigation">
          <div class="logo" aria-label="Glyphie logo">Glyphie</div>

          <button
            class="nav-btn active"
            data-section="characters"
            title="Characters"
            role="tab"
            aria-selected="true"
            tabindex="0"
          >
            <span aria-hidden="true">üëæ</span>
            <span class="label">Agents</span>
          </button>

          <button
            class="nav-btn"
            data-section="snip"
            title="Snip Tool"
            role="tab"
            aria-selected="false"
            tabindex="-1"
          >
            <span aria-hidden="true">‚úÇÔ∏è</span>
            <span class="label">Snip</span>
          </button>

          <button
            class="nav-btn"
            data-section="settings"
            title="Settings"
            role="tab"
            aria-selected="false"
            tabindex="-1"
          >
            <span aria-hidden="true">‚öôÔ∏è</span>
            <span class="label">Settings</span>
          </button>

          <button
            class="nav-btn"
            data-section="stats"
            title="Usage Stats"
            role="tab"
            aria-selected="false"
            tabindex="-1"
          >
            <span aria-hidden="true">üìä</span>
            <span class="label">Usage</span>
          </button>
        </nav>
        <!-- Characters Section -->
        <section
          id="characters-section"
          class="content-section"
          aria-label="Characters"
        ></section>

        <!-- Snip Section -->
        <section
          id="snip-section"
          class="content-section hidden"
          aria-label="Snip Tool"
        >
          <div class="chat-panel">
            <div class="chat-header" aria-label="Snip mode header">
              <span>Snip Mode ‚úÇÔ∏è</span>
            </div>

            <div id="snip-chat-history" class="chat-history"></div>
            <div class="chat-input-row">
              <button id="snip-btn" title="Start a new snip" type="button">
                Snip ‚úÇÔ∏è
              </button>
              <input
                id="snip-chat-input"
                type="text"
                placeholder="Add a message (optional)..."
                autocomplete="off"
                aria-label="Add a message (optional)"
              />
              <button id="snip-send-btn" type="button">Send</button>
            </div>
          </div>
        </section>

        <!-- Stats Section -->
        <section
          id="stats-section"
          class="content-section hidden"
          aria-label="Usage Stats"
        ></section>

        <!-- Settings Section -->
        <section
          id="settings-section"
          class="content-section hidden"
          aria-label="Settings"
        >
          <h2>Settings panel coming soon!</h2>
          <div class="appearance-section">
            <h3>Appearance</h3>
            <div class="setting-item">
              <label class="toggle-label" for="toggle-theme"
                >üåó Dark Mode:</label
              >
              <input id="toggle-theme" class="toggle-input" type="checkbox" />
              <span class="custom-slider"></span>
            </div>
          </div>
        </section>

        <!-- Main Content Area -->
        <main
          id="main-content"
          role="main"
          aria-live="polite"
          aria-relevant="additions removals"
          tabindex="0"
        >
          <!-- Active Chat Panel -->
          <div class="chat-panel" aria-label="Active chat panel">
            <div class="chat-header" aria-label="Chat header" role="banner">
              <img
                class="chat-avatar"
                alt="Agent avatar"
                id="chat-agent-avatar"
                src="avatars/white.png"
              />
              <span id="chat-agent-name" class="chat-agent-name"
                >Select an agent</span
              >
            </div>

            <div
              id="chat-history"
              class="chat-history"
              aria-live="polite"
              aria-atomic="false"
              tabindex="0"
            ></div>

            <!-- Toolbar with Attach & Regenerate buttons -->
            <div class="chat-toolbar" role="region" aria-label="Chat toolbar">
              <button
                id="toolbar-attach-btn"
                aria-label="Attach files"
                title="Attach files"
                type="button"
              >
                üìé
              </button>
              <button
                id="toolbar-regenerate-btn"
                aria-label="Regenerate response"
                title="Regenerate response"
                type="button"
              >
                ‚ü≥
              </button>
            </div>

            <!-- Attachment Preview Bar -->
            <div
              id="attachment-preview"
              aria-live="polite"
              aria-atomic="true"
            ></div>

            <!-- Chat Input Row -->
            <div class="chat-input-row">
              <div class="chat-input-group">
                <textarea
                  id="chat-input"
                  autocomplete="off"
                  placeholder="Ask or enter a prompt"
                  rows="1"
                  aria-multiline="true"
                  spellcheck="false"
                  aria-label="Chat input"
                ></textarea>
                <button
                  id="chat-send-btn"
                  aria-label="Send message"
                  type="button"
                >
                  Send
                </button>
              </div>
            </div>
          </div>

          <!-- Attachment Preview Modal -->
          <div
            id="attachment-modal"
            class="attachment-modal"
            role="dialog"
            aria-modal="true"
            aria-hidden="true"
            tabindex="-1"
            aria-label="Attachment preview modal"
          >
            <button
              id="attachment-modal-close"
              aria-label="Close attachment preview"
              title="Close"
              type="button"
            >
              √ó
            </button>
            <img id="attachment-modal-img" alt="Attachment preview" />
          </div>
        </main>
      </div>

      <div id="main-content-overlay" tabindex="-1"></div>
      <button
        id="sidebar-toggle"
        aria-label="Toggle sidebar"
        title="Toggle sidebar"
        type="button"
      >
        ‚ò∞
      </button>
    </div>
    <script src="popup.js"></script>
  </body>
</html>
